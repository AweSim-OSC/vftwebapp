(function() {
  var row_id = "#mesh_row_<%= @mesh.id %>";
  var row = $(row_id);
  var new_row = $("<%= j render "row", mesh: @mesh %>");
  if (row.length) {
    <%# If row exists, then remove it and re-add it %>
    meshTable.row(row).remove();
    meshTable.row.add(new_row);
    meshTable.draw();
  } else {
    <%# If mesh row doesn't exist then add it and re-sort so it is at the top %>
    meshTable.row.add(new_row);
    meshTable.order([3, "desc"]).draw();
  }

  <%# Dynamically add the dropzone to this element %>
  $(row_id).find(".dropzone").dropzone(dropzoneOpts);

  <%# Dynamically add the best_in_place to this element %>
  $(row_id).find(".best_in_place").best_in_place();
})();
